!function(){"use strict";jQuery(document).ready((function(){!function(e){const i=e(".wrap .page-title-action").first(),n=e('<button class="page-title-action">Import WSU Profiles</button>');let t;async function o(e){const i=t.find(".spinner"),n=t.find(".notice"),o=t.find(".error"),s=t.find("#submit"),a=t.find("#profile-nids"),r=a.val().split("\n").map((e=>e.trim())).join("\\n");if(n.addClass("hidden"),o.text(""),""!==r.trim()){i.addClass("is-active"),s.prop("disabled",!0);const e=await fetch("/wp-json/people-directory-api/v1/import-profiles",{method:"POST",body:new URLSearchParams({nids:r})});if(e.ok)a.val(""),location.reload();else{const t=await e.json();i.removeClass("is-active"),n.removeClass("hidden"),o.text(t.message),s.prop("disabled",!1)}}else n.removeClass("hidden"),o.text("The nids field cannot be empty."),s.prop("disabled",!1)}var s,a;(s=e('<div id="edit-profiles-page-modal-placeholder" style="display:none;"></div>')).html('\n            <div class="form-wrap edit-profiles-page-modal">\n                <div class="notice notice-error notice-alt inline hidden">\n                    <p class="error"></p>\n                </div>\n                <div class="form-field">\n                    <label for="profile-nids">List profile nids to import. One per line.</label>\n                    <textarea id="profile-nids" class="profile-nids" rows="5" placeholder="butch.cougar"></textarea>\n                </div>\n                <p class="submit">\n                    <button type="button" name="submit" id="submit" class="button button-primary">Import Profiles</button>\n                    <span class="spinner"></span>\n                </p>\n            </div>'),e(document.body).append(s),a=n,i.after(a),n.on("click",(function(i){tb_show("Import WSU Profiles","#TB_inline?inlineId=edit-profiles-page-modal-placeholder&width=300"),t=e(".edit-profiles-page-modal").first(),t.find("#submit").on("click",o),function(){const e=t.find(".notice"),i=t.find(".error"),n=t.find("#submit");e.addClass("hidden"),i.html(""),editProfilePageData.universityOrganization||(e.removeClass("hidden"),i.html('An organization slug must be selected on the <a href="/wp-admin/options-general.php?page=people_directory">People Directory settings page</a> before importing profiles.'),n.prop("disabled",!0))}()}))}(jQuery)}))}();